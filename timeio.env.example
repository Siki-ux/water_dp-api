# TimeIO Project Configuration (Example)
# Copy this file to 'timeio.env' and adjust values as needed.

# ==========================================
# IMAGES
# ==========================================
# Init
INIT_ALPINE_BASE_IMAGE_REGISTRY=alpine
INIT_ALPINE_BASE_IMAGE_TAG=latest
TIMEIO_INIT_IMAGE_TAG=latest

# Thing Management
THING_MANAGEMENT_LEGACY_IMAGE_TAG=latest
THING_MANAGEMENT_FRONTEND_IMAGE_TAG=latest
THING_MANAGEMENT_API_IMAGE_TAG=latest

# API / Backend
FROST_TOMCAT_BASE_IMAGE_REGISTRY=tomcat
FROST_TOMCAT_BASE_IMAGE_TAG=10.1.45
TIMEIO_FROST_IMAGE_TAG=latest
TSMDL_IMAGE_TAG=latest
DB_API_IMAGE_TAG=latest

# External Images
FLYWAY_IMAGE_REGISTRY=flyway/flyway
FLYWAY_IMAGE_TAG=10
PROXY_NGINX_IMAGE_REGISTRY=nginxinc/nginx-unprivileged
PROXY_NGINX_IMAGE_TAG=latest
DATABASE_POSTGRES_IMAGE_REGISTRY=timescale/timescaledb-ha
DATABASE_POSTGRES_IMAGE_TAG=pg15
MQTT_BROKER_MOSQUITTO_IMAGE_REGISTRY=iegomez/mosquitto-go-auth
MQTT_BROKER_MOSQUITTO_IMAGE_TAG=latest
VISUALIZATION_GRAFANA_IMAGE_REGISTRY=grafana/grafana
VISUALIZATION_GRAFANA_IMAGE_TAG=11.6.1
KEYCLOAK_IMAGE_REGISTRY=quay.io/keycloak/keycloak
KEYCLOAK_IMAGE_TAG=26.4
OBJECT_STORAGE_MINIO_IMAGE_REGISTRY=minio/minio
OBJECT_STORAGE_MINIO_IMAGE_TAG=RELEASE.2024-01-13T07-53-03Z

# Global Settings
SERVICE_RESTART_POLICY=on-failure
UID=1000
GID=1000
# =====================================================================
# SECURITY WARNING â€“ DUMMY/EXAMPLE FERNET KEY
# This value is provided ONLY for local development and example setups.
# DO NOT USE THIS KEY IN PRODUCTION OR ANY SHARED/REAL DEPLOYMENT.
# You MUST generate a unique, secret FERNET key for every deployment.
# Leaking or reusing this example key would allow decryption of any
# data encrypted with it.
# Generate a unique key for each deployment, e.g. in Python:
#   from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())
FERNET_ENCRYPTION_SECRET=CKoB---DEFAULT-DUMMY-SECRET---0exKVH0QDLy1B=
INIT_USE_CHOWN=true
DEFAULT_MAX_LOG_FILE_SIZE=10m
DEFAULT_MAX_LOG_FILE_COUNT=2

# ==========================================
# DATABASE (Shared TimescaleDB)
# ==========================================
# WARNING: Default credentials (postgres/postgres) are for local development ONLY.
# Change these to secure passwords before deploying to any shared or production environment.
DATABASE_HOST=postgres
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=postgres
DATABASE_NAME=water_data
DATABASE_ADMIN_HOST=postgres
DATABASE_ADMIN_DB_NAME=water_data
DATABASE_ADMIN_USER=postgres
DATABASE_ADMIN_PASSWORD=postgres
DATABASE_ADMIN_DSN=postgresql://postgres:postgres@postgres/water_data

# ==========================================
# MQTT BROKER (Mosquitto)
# ==========================================
MQTT_HOST=mqtt-broker
MQTT_PORT=1883
MQTT_PORT_SECURE=8883
MQTT_USER=mqtt
MQTT_PASSWORD=mqtt
MQTT_INGEST_USER=mqtt_ingest
MQTT_INGEST_PASSWORD=mqtt_ingest_password
MQTT_AUTH_POSTGRES_HOST=postgres
MQTT_AUTH_POSTGRES_PORT=5432
MQTT_AUTH_POSTGRES_USER=postgres
MQTT_AUTH_POSTGRES_PASS=postgres
MQTT_QOS=2

# ==========================================
# OBJECT STORAGE (MinIO)
# ==========================================
# WARNING: Default MinIO credentials (minioadmin/minioadmin) are insecure.
# Change these in production!
OBJECT_STORAGE_ROOT_USER=minioadmin
OBJECT_STORAGE_ROOT_PASSWORD=minioadmin
OBJECT_STORAGE_SERVER_URL=http://minio:9000
OBJECT_STORAGE_SFTP_PORT=2222
OBJECT_STORAGE_FTP_PORT=2121
OBJECT_STORAGE_FTP_PASV_PORTS_MAPPING=30000-30010:30000-30010

# ==========================================
# KEYCLOAK
# ==========================================
# WARNING: Do NOT use 'admin/admin' as Keycloak admin credentials in production.
# Always set a strong, randomly generated password for KEYCLOAK_ADMIN_PASSWORD.
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
# Seeded user passwords for local development/test (used by scripts/configure_keycloak_realm.py)
SEED_USER_FRONTENDBUS_PASS=frontendbus
SEED_USER_SIKI_PASS=password
SEED_USER_ADMIN_SIKI_PASS=admin-password
KEYCLOAK_DATABASE_HOST=postgres
KEYCLOAK_DATABASE_NAME=water_data
KEYCLOAK_PORT=8081
KEYCLOAK_HTTP_ENABLED=true
KEYCLOAK_HTTP_RELATIVE_PATH=/auth
KEYCLOAK_HOSTNAME_URL=http://localhost:8081/auth
KEYCLOAK_START_COMMAND=start-dev

# ==========================================
# THING MANAGEMENT API
# ==========================================
THING_MANAGEMENT_API_ENVIRONMENT=development
THING_MANAGEMENT_API_DATABASE_USER=postgres
THING_MANAGEMENT_API_DATABASE_PASS=postgres
THING_MANAGEMENT_API_DATABASE_SCHEMA=public
THING_MANAGEMENT_API_DSN=postgresql://postgres:postgres@postgres/water_data
THING_MANAGEMENT_MQTT_USER=frontendbus
THING_MANAGEMENT_MQTT_PASS=frontendbus
THING_MANAGEMENT_CLIENT_ID=timeIO-client
THING_MANAGEMENT_REALM=timeio
THING_MANAGEMENT_API_OIDC_URL=http://keycloak:8081/auth/realms/timeio

# Container Internal Mappings (Required by Thing Management API)
OIDC_CONF_URL=http://keycloak:8081/auth/realms/timeio/.well-known/openid-configuration
OIDC_CLIENT_ID=timeIO-client
# For public OIDC clients this must remain empty; for confidential clients set a strong, secret value in your local 'timeio.env'.
OIDC_CLIENT_SECRET=
OIDC_ADMIN_USERNAME=postgres
OIDC_ADMIN_PASSWORD=postgres
OIDC_ALLOWED_ISSUERS=["http://keycloak:8081/auth/realms/timeio"]
OIDC_ALLOWED_AUDIENCES=["account"]
DB_URL=postgresql://postgres:postgres@postgres/water_data
DB_SCHEMA=public
DB_HOST=postgres
DB_NAME=water_data
ENVIRONMENT=development

# ==========================================
# THING MANAGEMENT FRONTEND
# ==========================================
THING_MANAGEMENT_FRONTEND_APP_URL=http://localhost:80/thing-management
THING_MANAGEMENT_FRONTEND_API_URL=http://localhost:80/thing-management/api
THING_MANAGEMENT_FRONTEND_OIDC_URL=http://localhost:8081/auth/realms/timeio

# ==========================================
# PROXY & API
# ==========================================
PROXY_URL=http://localhost:80
SECRET_KEY=your-secret-key-change-in-production

# ==========================================
# GEOSERVER
# ==========================================
GEOSERVER_ADMIN_USER=admin
GEOSERVER_ADMIN_PASSWORD=geoserver

# ==========================================
# GRAFANA
# ==========================================
# IMPORTANT: Change VISUALIZATION_PASSWORD to a strong, unique value before deployment.
VISUALIZATION_USER=admin
VISUALIZATION_PASSWORD=admin
VISUALIZATION_PROXY_URL=http://localhost:80/visualization/

# ==========================================
# FROST (SensorThings)
# ==========================================
# STA_FROST_VERSION=2.5.3
FROST_TIMEOUT=30
# FROST_HTTP_CORS_ALLOWED_ORIGINS=http://localhost:8083,http://your-app-domain.com

# ==========================================
# SEEDING
# ==========================================
# Timeouts and retries for database/API seeding
# FROST_CHECK_TIMEOUT: Timeout for initial FROST availability check (seconds)
# SEED_TIMEOUT: Timeout for individual seeding requests (seconds)
# SEED_MAX_RETRIES: Maximum number of retries for failed seeding operations
# SEED_RETRY_DELAY: Delay between retries (seconds)
FROST_CHECK_TIMEOUT=10
SEED_TIMEOUT=30
SEED_MAX_RETRIES=3
SEED_RETRY_DELAY=5
